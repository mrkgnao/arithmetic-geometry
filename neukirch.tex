\documentclass{memoir}

\usepackage{amsmath,amssymb,amsfonts,mathrsfs,amsthm}
\usepackage{varioref}
\usepackage{hyperref}
\usepackage{cleveref}
\usepackage{tikz}
\usepackage{xcolor}
\hypersetup{
    colorlinks,
    linkcolor={blue!70!black},
    citecolor={blue},
    urlcolor={blue}
}

\usetikzlibrary{cd}

\usepackage[euler-digits,euler-hat-accent]{eulervm}
\usepackage{palatino}

\input{generated-preamble.tex}

% \newcommand{\mr}[1][]{\br^{\ifthenelse{\isempty{#1}}{n}{#1}}}

\input{custom-preamble.tex}

\begin{document}

\chapter{Algebraic integers}

\section{Integrality}

Fix a domain $A$ integrally closed in $K := K(A)$. Let $L|K$ be a finite
extension, and $B$ the integral closure of $A$ in $L$. This is the \emph{$AKLB$
  diagram}:

\[
  \begin{tikzcd}
    K \arrow[r, hook] & L \\
    A \arrow[u] \arrow[r] & B \arrow[u]
  \end{tikzcd}
\]

Integrality is stable under the ring operations: one would like the following to
hold, and they do:

This is a corollary

\begin{theorem}[Module-theoretic characterization of integrality]{\label{module-integrality}}
  A finite number of $b_i$ are integral over $A$ $\iff$ the ring $A[b_1,\ldots,b_n]$ is
  finitely generated as an $A$-module.
\end{theorem}
\begin{proof}
  TODO.
\end{proof}

\begin{corollary}{\label{integrality-of-sums-products}}
  If $a$ and $b$ are integral over $A$, so are $a + b$ and $ab$.
\end{corollary}

\begin{theorem}[Integrality is transitive]{\label{integrality-trans}}
  Consider ring extensions $A \subseteq B \subseteq C$.
  $A \subseteq B$ integral and $B \subseteq C$ integral $\iff$ $A \subseteq C$ integral.
\end{theorem}
\begin{proof}
  TODO.
\end{proof}

\begin{theorem}
  Any element $l \in L$ is equal to $b/a$ for $b \in B$ and $a \in A$.
\end{theorem}

\begin{proof}
  Consider an element $l \in L$. The minimal polynomial $m_l$ of $l$ over $K$
  gives rise to a polynomial over $A$
  \[ a_nl^n + a_{n-1}l^{n-1} + \cdots + a_0 = 0 \] by clearing denominators. Now
  observe that $\ell := a_nl$ is integral over $A$: multiplying by $a_n^{n-1}$
  gives an equation of the form
  \[ \ell^n + a_{n-1}'\ell^{n-1} + \cdots + a_0' = 0. \] This shows that taking
  $b/a$ = $\ell/a_n$ works.
\end{proof}

\begin{remark}
  Notice that $K(B) = L$. Indeed, $B \subset L$ so $K(B) \subset L$, and the
  result above shows that $L \subset K(B)$ (set-theoretically, $L \subset B
  \times A \subset B \times B$).
\end{remark}

\begin{theorem}
  $l \in L$ is integral over $A$ iff its minimal polynomial $\mu_l$ over $K$ has
  coefficients in $A$.
\end{theorem}

\begin{proof}
  If $\mu := \mu_l \in A[x]$ then we have integrality of $l$ over $A$ by
  definition. Consider now the case of an integral $l$ with minimal polynomial
  $\mu \in K[x]$. From integrality over $A$ we know that $l$ is a root of some
  $g \in A[x]$. Then $\mu | g$ in $K[x]$, so all zeros of $\mu$ are zeros of $g$
  and hence integral over $A$.

  \npar By Viet\`a, the coefficients $a_i$ are given by elementary symmetric
  polynomials in the roots and are hence, by
  \Cref{integrality-of-sums-products}, integral over $A$ themselves. The $a_i$
  are elements of $K$, so, in this case, integrality over $A$ means that $a_i
  \in K$, and hence $\mu \in A[x]$.
\end{proof}

\section{The trace and the norm}

Given $x \in L$, multiplication by $x$ determines an endomorphism

\[ T_x : \alpha \mapsto x\alpha \]

of the $K$-vector space $L$. We define the trace and norm maps

\noindent
\begin{align*}
\tr z &= \Tr T_z\\
\nm z &= \det T_z
\end{align*}
\begin{theorem}
  adsf in \Cref{integrality-of-sums-products} k
\end{theorem}

asdf

\end{document}
